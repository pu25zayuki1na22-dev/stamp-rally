let gotStamp = false;
let stampCount = 0;
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>è¦³å…‰ã‚¹ã‚¿ãƒ³ãƒ—ãƒ©ãƒªãƒ¼</title>
<style>
body {
  text-align: center;
  font-family: sans-serif;
}
button {
  font-size: 20px;
  padding: 15px;
}
</style>
</head>
<body>

<h2>è¦³å…‰ã‚¹ã‚¿ãƒ³ãƒ—ãƒ©ãƒªãƒ¼</h2>
<p>è¦³å…‰åœ°ã«è¿‘ã¥ã„ã¦ãƒœã‚¿ãƒ³ã‚’æŠ¼ãã†ï¼</p>
<button onclick="getLocation()">ç¾åœ¨åœ°ã‚’ãƒã‚§ãƒƒã‚¯</button>
<h2 id="score">ç¾åœ¨ã®ãƒã‚¤ãƒ³ãƒˆ: 0</h2>
<p id="result"></p>

<script>
let stampCount = 0;
  
const spots = [
  { name: "äº”ç¨œéƒ­", lat: 41.7967, lng: 140.7569, got: false, point: 1 },
  { name: "å‡½é¤¨å±±", lat: 41.7592, lng: 140.7043, got: false, point: 1 },
  { name: "é‡‘æ£®èµ¤ãƒ¬ãƒ³ã‚¬å€‰åº«", lat: 41.7654, lng: 140.7188, got: false, point: 2 }
];


function getLocation() {
  if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition(function(position) {
  checkPosition(position);
});
   
  } else {
    document.getElementById("result").textContent = "ä½ç½®æƒ…å ±ãŒä½¿ãˆã¾ã›ã‚“";
  }
}

function checkPosition(position) {
  const userLat = position.coords.latitude;
  const userLng = position.coords.longitude;

  let found = false;

  spots.forEach(spot => {
    const distance =
      Math.sqrt(
        Math.pow(userLat - spot.lat, 2) +
        Math.pow(userLng - spot.lng, 2)
      );

    if (distance < 0.01) {
      if (!spot.got) {
        spot.got = true;
        stampCount += spot.point;

        document.getElementById("score").textContent =
  "ç¾åœ¨ã®ãƒã‚¤ãƒ³ãƒˆ: " + stampCount;

        if (stampCount === 4) {
  document.getElementById("result").textContent =
    "ğŸ‰ å…¨ã‚¹ãƒãƒƒãƒˆåˆ¶è¦‡ï¼ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆãŠã‚ã§ã¨ã†ï¼ ğŸ‰";
} else {
  document.getElementById("result").textContent =
    spot.name + " ã®ã‚¹ã‚¿ãƒ³ãƒ—ã‚²ãƒƒãƒˆï¼ ç¾åœ¨ã®ã‚¹ã‚¿ãƒ³ãƒ—æ•°: " + stampCount;
}

      } else {
        document.getElementById("result").textContent =
          spot.name + " ã¯ã™ã§ã«å–å¾—æ¸ˆã¿ï¼";
      }
      found = true;
    }
  });

  if (!found) {
    document.getElementById("result").textContent =
      "ã¾ã è¦³å…‰åœ°ã«ã„ã¾ã›ã‚“ï¼";
  }
}

</script>

</body>
</html>
